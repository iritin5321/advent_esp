<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÑ Calendario de Adviento - Expresiones Navide√±as</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            animation: fadeIn 1s ease-in;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .calendar-container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            padding: 20px;
        }

        .day-box {
            background: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .day-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 12px rgba(0,0,0,0.2);
        }

        .day-box.opened {
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
        }

        .day-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .day-box.opened .day-number {
            color: #d63031;
        }

        .gift-icon {
            font-size: 3em;
            margin: 10px 0;
        }

        .day-label {
            font-size: 0.9em;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        }

        .modal.active {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 700px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: slideUp 0.4s ease;
        }

        .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2em;
            cursor: pointer;
            color: #666;
            background: none;
            border: none;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: #f0f0f0;
            color: #333;
        }

        .modal-header {
            text-align: center;
            margin-bottom: 30px;
            color: #667eea;
        }

        .modal-header h2 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .expression-title {
            font-size: 1.8em;
            color: #d63031;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .section {
            margin-bottom: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .section-title {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.1em;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .section-content {
            color: #333;
            line-height: 1.6;
        }

        .task-section {
            background: #fff3cd;
            border-left-color: #ffc107;
        }

        .task-section .section-title {
            color: #856404;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .progress {
            text-align: center;
            color: white;
            margin-top: 30px;
            font-size: 1.2em;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }
            
            .calendar-container {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                gap: 10px;
            }
            
            .modal-content {
                padding: 30px 20px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üéÑ Calendario de Adviento Navide√±o üéÑ</h1>
        <p>Descubre una expresi√≥n espa√±ola cada d√≠a</p>
    </div>

    <div class="calendar-container" id="calendar"></div>

    <div class="progress" id="progress"></div>

    <div class="modal" id="modal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal()">√ó</button>
            <div id="modalContent"></div>
        </div>
    </div>

    <script>
        const expressions = [
            {
                day: 1,
                expression: "Estar de fiesta",
                meaning: "Celebrar o estar de humor festivo.",
                example: "Todo el barrio est√° de fiesta porque han puesto las luces navide√±as en las calles.",
                culture: "En Espa√±a y Latinoam√©rica, desde principios de diciembre las ciudades se transforman con decoraciones, y el ambiente festivo se siente en todos lados.",
                task: "Describe una situaci√≥n en tu ciudad o pa√≠s cuando la gente \"est√° de fiesta\" durante diciembre. ¬øQu√© hacen? ¬øC√≥mo se nota?"
            },
            {
                day: 2,
                expression: "Ser m√°s bueno que el pan",
                meaning: "Ser una persona muy bondadosa y generosa.",
                example: "Mi abuela es m√°s buena que el pan, siempre prepara comida extra para los vecinos en Navidad.",
                culture: "El pan es un alimento b√°sico y esencial en la cultura hispana, s√≠mbolo de bondad y generosidad. Esta expresi√≥n se usa mucho en Navidad para destacar la generosidad de las personas.",
                task: "Escribe sobre alguien que conoces que sea \"m√°s bueno que el pan\". ¬øQu√© hace esa persona que demuestra su bondad?"
            },
            {
                day: 3,
                expression: "Pasar las Navidades en familia",
                meaning: "Celebrar estas fechas con los seres queridos.",
                example: "Este a√±o vamos a pasar las Navidades en familia en casa de mis padres, como siempre.",
                culture: "En el mundo hispano, la familia es el centro de las celebraciones navide√±as. Las reuniones familiares son sagradas, y muchas personas viajan largas distancias para estar juntos.",
                task: "¬øC√≥mo pasas t√∫ las Navidades normalmente? ¬øCon qui√©n te re√∫nes y qu√© hacen juntos?"
            },
            {
                day: 4,
                expression: "Tener el esp√≠ritu navide√±o",
                meaning: "Estar lleno de alegr√≠a, generosidad y buenos sentimientos propios de la √©poca.",
                example: "Mar√≠a tiene mucho esp√≠ritu navide√±o este a√±o: ha decorado toda su casa y ya compr√≥ regalos para todos.",
                culture: "El \"esp√≠ritu navide√±o\" incluye la decoraci√≥n, la m√∫sica, la generosidad y la alegr√≠a. En pa√≠ses hispanos se manifiesta tambi√©n en villancicos, aguinaldos y actos de caridad.",
                task: "¬øQu√© cosas te ayudan a ti a tener el esp√≠ritu navide√±o? Menciona al menos 3 actividades o tradiciones."
            },
            {
                day: 5,
                expression: "Poner el bel√©n",
                meaning: "Montar el nacimiento o pesebre navide√±o.",
                example: "Cada 8 de diciembre ponemos el bel√©n en el sal√≥n, es una tradici√≥n familiar.",
                culture: "En Espa√±a especialmente, el bel√©n es una tradici√≥n muy arraigada. Muchas familias tienen figuras que pasan de generaci√≥n en generaci√≥n. Algunos pueblos crean belenes vivientes con personas reales.",
                task: "¬øExiste una tradici√≥n similar en tu pa√≠s? Si pones decoraciones navide√±as, ¬øcu√°l es la primera que colocas?"
            },
            {
                day: 6,
                expression: "Las fiestas est√°n a la vuelta de la esquina",
                meaning: "Las celebraciones est√°n muy cerca, est√°n por llegar.",
                example: "¬°No puedo creer que las fiestas est√©n a la vuelta de la esquina! Todav√≠a no he comprado ning√∫n regalo.",
                culture: "Esta expresi√≥n refleja la mezcla de emoci√≥n y estr√©s que muchos sienten en diciembre con los preparativos de √∫ltima hora.",
                task: "Completa la frase: \"Cuando las fiestas est√°n a la vuelta de la esquina, yo siempre...\""
            },
            {
                day: 7,
                expression: "Brillar como un √°rbol de Navidad",
                meaning: "Estar muy arreglado o llevar muchas joyas/adornos brillantes.",
                example: "Ana lleg√≥ a la cena de empresa brillando como un √°rbol de Navidad, con su vestido de lentejuelas y todas sus joyas.",
                culture: "Las fiestas de empresa y cenas navide√±as son ocasiones para vestirse elegantemente. Esta expresi√≥n se usa con humor para describir a alguien muy adornado.",
                task: "Describe c√≥mo te gusta vestirte para las celebraciones navide√±as. ¬øPrefieres brillar como un √°rbol de Navidad o algo m√°s discreto?"
            },
            {
                day: 8,
                expression: "Hacer las paces",
                meaning: "Reconciliarse con alguien, resolver un conflicto.",
                example: "La Navidad es buen momento para hacer las paces con las personas con las que hemos discutido.",
                culture: "La Navidad es vista como √©poca de perd√≥n y reconciliaci√≥n. Muchas familias aprovechan estas fechas para resolver conflictos del a√±o.",
                task: "¬øCrees que es importante \"hacer las paces\" en Navidad? ¬øPor qu√© s√≠ o por qu√© no?"
            },
            {
                day: 9,
                expression: "A√±o Nuevo, vida nueva",
                meaning: "Expresa el deseo de cambiar y mejorar con el nuevo a√±o.",
                example: "Ya dej√© de fumar y empec√© el gimnasio: a√±o nuevo, vida nueva.",
                culture: "Este refr√°n popular refleja el optimismo con el que se recibe el a√±o nuevo en toda Hispanoam√©rica. Es el momento de los prop√≥sitos y nuevos comienzos.",
                task: "¬øQu√© significa para ti \"a√±o nuevo, vida nueva\"? ¬øHay algo que quieras cambiar?"
            },
            {
                day: 10,
                expression: "Comerse las uvas / Tomar las uvas",
                meaning: "Comer las 12 uvas en Nochevieja al ritmo de las campanadas del reloj.",
                example: "A medianoche nos comimos las uvas mientras sonaban las campanadas de la Puerta del Sol.",
                culture: "Esta es una tradici√≥n espa√±ola que se ha extendido a Latinoam√©rica. Las 12 uvas representan 12 deseos para los 12 meses del a√±o. En Espa√±a, millones ven las campanadas de la Puerta del Sol de Madrid por TV.",
                task: "¬øConoc√≠as esta tradici√≥n? ¬øQu√© tradici√≥n especial tienen en tu pa√≠s para recibir el A√±o Nuevo?"
            },
            {
                day: 11,
                expression: "Tener un coraz√≥n de oro",
                meaning: "Ser muy generoso y bondadoso.",
                example: "El due√±o de la tienda tiene un coraz√≥n de oro: cada Navidad regala juguetes a los ni√±os del barrio.",
                culture: "La generosidad es un valor muy asociado con la Navidad. Muchas personas y empresas realizan actos de caridad en estas fechas.",
                task: "Cuenta una historia de alguien que conoces o has visto que tenga \"un coraz√≥n de oro\"."
            },
            {
                day: 12,
                expression: "Estar como unas Pascuas",
                meaning: "Estar muy alegre y contento.",
                example: "Desde que llegaron los nietos, mi madre est√° como unas Pascuas.",
                culture: "\"Pascuas\" se refiere a festividades religiosas importantes. La expresi√≥n compara la alegr√≠a de alguien con la felicidad de las celebraciones.",
                task: "¬øQu√© cosas te ponen \"como unas Pascuas\" durante las fiestas? Menciona al menos dos."
            },
            {
                day: 13,
                expression: "No todo el monte es or√©gano",
                meaning: "No todo es f√°cil o agradable, hay dificultades.",
                example: "Las fiestas son bonitas, pero no todo el monte es or√©gano: tambi√©n hay gastos, estr√©s y discusiones familiares.",
                culture: "Este refr√°n recuerda que incluso en √©pocas felices hay desaf√≠os. En Navidad, el estr√©s de los preparativos, gastos y reuniones puede ser agobiante.",
                task: "¬øCu√°l es la parte menos divertida de las fiestas para ti? Explica por qu√© \"no todo el monte es or√©gano\" en Navidad."
            },
            {
                day: 14,
                expression: "Hacer buenas migas con alguien",
                meaning: "Llevarse bien con alguien, tener buena relaci√≥n.",
                example: "En la cena de Nochebuena conoc√≠ al novio de mi prima y enseguida hicimos buenas migas.",
                culture: "Las reuniones navide√±as a menudo incluyen conocer nuevos miembros de la familia o amigos. Esta expresi√≥n viene de \"migas\", un plato tradicional espa√±ol que requiere mezclar bien los ingredientes.",
                task: "¬øCon qu√© tipo de personas haces t√∫ buenas migas f√°cilmente? Describe las cualidades que buscas."
            },
            {
                day: 15,
                expression: "De Nochebuena a A√±o Nuevo, todo es jolgorio y jaleo",
                meaning: "Estas fechas est√°n llenas de celebraciones y alboroto.",
                example: "De Nochebuena a A√±o Nuevo, todo es jolgorio y jaleo: fiestas, comidas, brindis... ¬°no paramos!",
                culture: "Este refr√°n captura perfectamente la intensidad de las festividades. \"Jolgorio\" es diversi√≥n ruidosa y \"jaleo\" es bullicio. Entre el 24 de diciembre y el 1 de enero hay celebraciones casi diarias.",
                task: "Describe c√≥mo son estos d√≠as en tu familia. ¬øEs verdad que todo es \"jolgorio y jaleo\"?"
            },
            {
                day: 16,
                expression: "M√°s vale tarde que nunca",
                meaning: "Mejor hacer algo con retraso que no hacerlo.",
                example: "Compr√© el regalo el 24 por la tarde. Bueno, m√°s vale tarde que nunca.",
                culture: "Este refr√°n es muy √∫til durante las compras navide√±as de √∫ltima hora, algo com√∫n en la cultura hispana donde muchos dejan todo para el √∫ltimo momento.",
                task: "¬øEres de los que prepara todo con anticipaci√≥n o de los que dice \"m√°s vale tarde que nunca\"? Cuenta una an√©cdota."
            },
            {
                day: 17,
                expression: "Echar la casa por la ventana",
                meaning: "Gastar mucho dinero en una celebraci√≥n.",
                example: "Este a√±o mis padres echaron la casa por la ventana y organizaron una gran fiesta de Navidad con todos los amigos.",
                culture: "En las fiestas navide√±as es com√∫n que las familias gasten m√°s de lo habitual en comida, decoraci√≥n y regalos. Esta expresi√≥n refleja esa generosidad y exceso caracter√≠sticos de la √©poca.",
                task: "¬øEn qu√© ocasi√≥n echar√≠as t√∫ \"la casa por la ventana\"? ¬øVale la pena hacerlo en Navidad?"
            },
            {
                day: 18,
                expression: "Estar en la gloria",
                meaning: "Estar muy feliz y c√≥modo.",
                example: "Despu√©s de la cena navide√±a, sentado en el sof√° con mi familia, estaba en la gloria.",
                culture: "Esta expresi√≥n refleja esos momentos de plenitud que muchos sienten durante las reuniones familiares, especialmente despu√©s de una buena comida.",
                task: "Describe un momento en las fiestas en el que t√∫ est√©s o hayas estado \"en la gloria\"."
            },
            {
                day: 19,
                expression: "Quedar en familia",
                meaning: "Reunirse solo con los familiares cercanos, celebrar de forma √≠ntima.",
                example: "Este a√±o la Nochebuena va a quedar en familia, solo nosotros, nada de amigos.",
                culture: "Aunque muchas celebraciones son grandes, tambi√©n hay un valor especial en las reuniones √≠ntimas. Algunas familias prefieren la tranquilidad de estar solo entre ellos.",
                task: "¬øPrefieres que las celebraciones queden en familia o te gusta incluir amigos? ¬øPor qu√©?"
            },
            {
                day: 20,
                expression: "A Dios rogando y con el mazo dando",
                meaning: "Hay que pedir deseos pero tambi√©n esforzarse para conseguirlos.",
                example: "Quiero aprobar todos los ex√°menes en enero: a Dios rogando y con el mazo dando, ¬°a estudiar!",
                culture: "Este refr√°n es perfecto para los prop√≥sitos de A√±o Nuevo. No basta con desear, hay que trabajar por ello. Refleja la mentalidad pr√°ctica de la cultura hispana.",
                task: "Escribe un prop√≥sito de A√±o Nuevo y explica c√≥mo vas \"a Dios rogando y con el mazo dando\" para cumplirlo."
            },
            {
                day: 21,
                expression: "Hacer el amigo invisible",
                meaning: "Juego navide√±o de intercambio de regalos secreto.",
                example: "En la oficina hicimos el amigo invisible y me toc√≥ comprarle un regalo a Carlos.",
                culture: "Esta tradici√≥n es muy popular en Espa√±a y Latinoam√©rica en √°mbitos laborales y grupos de amigos. Cada persona sortea un nombre en secreto y le compra un regalo a esa persona, evitando as√≠ tener que comprar para todos.",
                task: "¬øHas participado alguna vez en un amigo invisible? Cuenta tu experiencia o, si no, ¬øte gustar√≠a participar? ¬øPor qu√©?"
            },
            {
                day: 22,
                expression: "Por si las moscas",
                meaning: "Por precauci√≥n, por si acaso.",
                example: "Voy a comprar un regalo extra, por si las moscas viene alguien inesperado a la cena.",
                culture: "Esta expresi√≥n coloquial refleja la hospitalidad hispana y la tendencia a querer estar preparado para cualquier situaci√≥n, especialmente en fiestas.",
                task: "¬øQu√© haces t√∫ \"por si las moscas\" durante las fiestas? Menciona una precauci√≥n que siempre tomas."
            },
            {
                day: 23,
                expression: "Dar las uvas",
                meaning: "(Coloquial) Llegar muy tarde, demorarse much√≠simo.",
                example: "¬°Marcos siempre da las uvas! Dijimos a las 8 y lleg√≥ a las 10 de la noche.",
                culture: "Esta expresi√≥n hace referencia a las 12 uvas de medianoche, sugiriendo que alguien tarda tanto que ya es A√±o Nuevo. Es una forma humor√≠stica de criticar la impuntualidad.",
                task: "¬øEres puntual o tiendes a \"dar las uvas\"? Cuenta una situaci√≥n divertida relacionada con la puntualidad en las fiestas."
            },
            {
                day: 24,
                expression: "La Nochebuena se viene, la Nochebuena se va",
                meaning: "Refleja lo r√°pido que pasan estas fechas especiales.",
                example: "La Nochebuena se viene, la Nochebuena se va, y nosotros nos iremos y no volveremos m√°s... ¬°Qu√© r√°pido pas√≥ todo!",
                culture: "Esta es una frase de un villancico tradicional espa√±ol que muchos conocen. Expresa cierta nostalgia por lo ef√≠mero de las celebraciones.",
                task: "¬øSientes que las fiestas pasan muy r√°pido? ¬øQu√© haces para disfrutar cada momento?"
            },
            {
                day: 25,
                expression: "Felices fiestas",
                meaning: "Deseo de felicidad para todas las celebraciones de temporada.",
                example: "Os deseo a todos felices fiestas y que el pr√≥ximo a√±o venga cargado de cosas buenas.",
                culture: "Esta es una expresi√≥n inclusiva que engloba todas las celebraciones de diciembre y principios de enero. Es una forma respetuosa de felicitar sin especificar una celebraci√≥n religiosa concreta.",
                task: "Escribe un mensaje original deseando \"felices fiestas\" a tus compa√±eros de clase."
            },
            {
                day: 26,
                expression: "Estar hasta arriba",
                meaning: "Estar muy ocupado o muy lleno (de trabajo, comida, etc.).",
                example: "Despu√©s de la comida de Navidad estoy hasta arriba, no puedo comer ni un polvor√≥n m√°s.",
                culture: "Esta expresi√≥n es muy com√∫n durante las fiestas, tanto para referirse al exceso de comida como al exceso de actividades sociales y familiares.",
                task: "¬øDe qu√© sueles estar \"hasta arriba\" durante las fiestas? Puede ser de comida, trabajo, reuniones..."
            },
            {
                day: 27,
                expression: "Entrar con buen pie",
                meaning: "Comenzar algo de manera favorable.",
                example: "Quiero entrar con buen pie en el A√±o Nuevo: haciendo ejercicio y comiendo sano desde el d√≠a 1.",
                culture: "Existe la superstici√≥n en muchos pa√≠ses hispanos de que c√≥mo comiences el a√±o es c√≥mo lo continuar√°s. Por eso muchos se esfuerzan por \"entrar con buen pie\".",
                task: "¬øQu√© har√°s t√∫ para \"entrar con buen pie\" en el A√±o Nuevo? Describe tus planes para el 1 de enero."
            },
            {
                day: 28,
                expression: "Hacer borr√≥n y cuenta nueva",
                meaning: "Olvidar el pasado y empezar de cero.",
                example: "Este a√±o tuve muchos problemas, pero en enero har√© borr√≥n y cuenta nueva.",
                culture: "El A√±o Nuevo simboliza un nuevo comienzo en la cultura hispana. Es momento de perdonar, olvidar lo malo y renovar esperanzas. Esta actitud optimista es fundamental en las celebraciones.",
                task: "¬øHay algo del a√±o pasado de lo que quieras \"hacer borr√≥n y cuenta nueva\"? No hace falta que sea muy personal, puede ser un h√°bito o actitud."
            },
            {
                day: 29,
                expression: "Esperar a los Reyes Magos",
                meaning: "Referencia a la tradici√≥n del 6 de enero cuando los ni√±os reciben regalos.",
                example: "Los ni√±os est√°n emocionados esperando a los Reyes Magos, ya escribieron su carta.",
                culture: "En Espa√±a y muchos pa√≠ses latinoamericanos, los Reyes Magos (Melchor, Gaspar y Baltasar) son quienes traen los regalos el 6 de enero, no Santa Claus el 25 de diciembre. Los ni√±os dejan sus zapatos y agua para los camellos.",
                task: "¬øQui√©n trae los regalos en tu cultura: Santa Claus, los Reyes Magos u otro personaje? Describe esa tradici√≥n."
            },
            {
                day: 30,
                expression: "Hacerse buenos prop√≥sitos",
                meaning: "Plantearse objetivos y metas para mejorar.",
                example: "Me hice buenos prop√≥sitos para el a√±o nuevo: aprender espa√±ol, leer m√°s y viajar.",
                culture: "Los prop√≥sitos de A√±o Nuevo son una tradici√≥n universal, pero en el mundo hispano se toman muy en serio, a menudo comparti√©ndolos en las cenas de fin de a√±o.",
                task: "Escribe tres buenos prop√≥sitos para el pr√≥ximo a√±o relacionados con el aprendizaje del espa√±ol."
            },
            {
                day: 31,
                expression: "¬°Feliz A√±o Nuevo! / ¬°Pr√≥spero A√±o Nuevo!",
                meaning: "Deseos tradicionales para el a√±o que comienza.",
                example: "¬°Feliz y pr√≥spero A√±o Nuevo para todos! Que se cumplan todos vuestros sue√±os.",
                culture: "Estas expresiones se dicen justo despu√©s de las campanadas de medianoche. En muchos pa√≠ses hispanos se abraza a todos los presentes y se brindan con champ√°n o sidra. Tambi√©n hay tradiciones como usar ropa interior roja o amarilla, comer lentejas, o dar la vuelta a la manzana con maletas para atraer viajes.",
                task: "Escribe un mensaje de A√±o Nuevo a tu profesor/a de espa√±ol agradeci√©ndole por este a√±o de aprendizaje y usando al menos 3 de las expresiones que has aprendido este mes."
            }
        ];

        let openedDays = [];

        try {
            const stored = localStorage.getItem('openedDays');
            if (stored) {
                openedDays = JSON.parse(stored);
            }
        } catch (e) {
            console.log('LocalStorage no disponible');
        }

        function createCalendar() {
            const calendar = document.getElementById('calendar');
            expressions.forEach(function(expr) {
                const dayBox = document.createElement('div');
                dayBox.className = 'day-box';
                if (openedDays.includes(expr.day)) {
                    dayBox.classList.add('opened');
                }
                
                dayBox.innerHTML = '<div class="day-number">' + expr.day + '</div>' +
                    '<div class="gift-icon">' + (openedDays.includes(expr.day) ? '‚úÖ' : 'üéÅ') + '</div>' +
                    '<div class="day-label">Diciembre</div>';
                
                dayBox.onclick = function() {
                    openDay(expr);
                };
                calendar.appendChild(dayBox);
            });
            
            updateProgress();
        }

        function openDay(expr) {
            const modal = document.getElementById('modal');
            const modalContent = document.getElementById('modalContent');
            
            modalContent.innerHTML = '<div class="modal-header">' +
                '<h2>üéÅ D√≠a ' + expr.day + ' de Diciembre</h2>' +
                '</div>' +
                '<div class="expression-title">"' + expr.expression + '"</div>' +
                '<div class="section">' +
                '<div class="section-title">üìñ Significado</div>' +
                '<div class="section-content">' + expr.meaning + '</div>' +
                '</div>' +
                '<div class="section">' +
                '<div class="section-title">üí¨ Ejemplo</div>' +
                '<div class="section-content">"' + expr.example + '"</div>' +
                '</div>' +
                '<div class="section">' +
                '<div class="section-title">üåç Contexto Cultural</div>' +
                '<div class="section-content">' + expr.culture + '</div>' +
                '</div>' +
                '<div class="section task-section">' +
                '<div class="section-title">‚úçÔ∏è Tu Tarea</div>' +
                '<div class="section-content">' + expr.task + '</div>' +
                '</div>';
            
            modal.classList.add('active');
            
            if (!openedDays.includes(expr.day)) {
                openedDays.push(expr.day);
                try {
                    localStorage.setItem('openedDays', JSON.stringify(openedDays));
                } catch (e) {
                    console.log('No se pudo guardar en localStorage');
                }
                
                const boxes = document.querySelectorAll('.day-box');
                boxes[expr.day - 1].classList.add('opened');
                boxes[expr.day - 1].querySelector('.gift-icon').textContent = '‚úÖ';
                
                updateProgress();
            }
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('active');
        }

        function updateProgress() {
            const progress = document.getElementById('progress');
            const total = expressions.length;
            const opened = openedDays.length;
            const percentage = Math.round((opened / total) * 100);
            progress.innerHTML = 'üìä Progreso: ' + opened + ' de ' + total + ' d√≠as abiertos (' + percentage + '%)';
        }

        window.onclick = function(event) {
            const modal = document.getElementById('modal');
            if (event.target === modal) {
                closeModal();
            }
        };

        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeModal();
            }
        });

        createCalendar();
    </script>
</body>
</html>
